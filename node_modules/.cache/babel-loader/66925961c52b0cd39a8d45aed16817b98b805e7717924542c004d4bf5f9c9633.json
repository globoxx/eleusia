{"ast":null,"code":"import React,{useEffect,useState}from'react';import{CategoryScale,Chart as ChartJS,Legend,LineElement,LinearScale,PointElement,Title,Tooltip}from'chart.js';import{Line}from'react-chartjs-2';import{FormControlLabel,Switch}from'@mui/material';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";ChartJS.register(CategoryScale,LinearScale,PointElement,LineElement,Title,Tooltip,Legend);function cumulativeSum(numbers){let cumulativeSum=0;const cumulativeSums=[0];for(let i=0;i<numbers.length;i++){cumulativeSum+=numbers[i];cumulativeSums.push(cumulativeSum);}return cumulativeSums;}function generateRange(a,b){const range=[];for(let i=a;i<=b;i++){range.push(i);}return range;}const COLORS=['rgba(255, 99, 132, 0.5)','rgba(54, 162, 235, 0.5)','rgba(255, 206, 86, 0.5)','rgba(75, 192, 192, 0.5)','rgba(153, 102, 255, 0.5)','rgba(255, 159, 64, 0.5)','rgba(255, 99, 132, 0.5)','rgba(54, 162, 235, 0.5)'];export default function ScoreChart(_ref){let{scores,pseudo,isCreator,allImages,allLabels}=_ref;const[cummulative,setCummulative]=useState(false);const[initialScores,setInitialScores]=useState(scores);// Copie les scores dans l'état lors du montage\nuseEffect(()=>{setInitialScores(scores);// Met à jour initialScores seulement lors du montage\n},[]);// Passer un tableau vide comme dépendance rend l'effet exécutable seulement lors du montage\nconst handleChange=event=>{setCummulative(event.target.checked);};const nb_predictions=Object.values(initialScores)[0].length;const labels=cummulative?generateRange(0,nb_predictions):generateRange(1,nb_predictions);const data={labels:labels,datasets:Object.keys(initialScores).map((player,index)=>({label:player,data:cummulative?cumulativeSum(Object.values(initialScores[player])):Object.values(initialScores[player]),backgroundColor:COLORS[index%COLORS.length],borderColor:COLORS[index%COLORS.length].replace('0.5','1'),hidden:!isCreator&&player!==pseudo}))};// Options de la chart\nconst options={responsive:true,plugins:{legend:{position:'top'},title:{display:true,text:cummulative?'Evolution du score total':'Evolution de la qualité des prédictions'},tooltip:{enabled:false,external:context=>externalTooltipHandler(context,allImages,allLabels,cummulative)}},scales:{x:{title:{display:true,text:'Prédiction'}},y:{title:{display:true,text:'Score'}}}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(FormControlLabel,{control:/*#__PURE__*/_jsx(Switch,{checked:cummulative,onChange:handleChange,inputProps:{'aria-label':'controlled'}}),label:\"Afficher score total\"}),/*#__PURE__*/_jsx(Line,{data:data,options:options})]});}const getImageForDataPoint=(images,dataIndex)=>{if(0<=dataIndex&&dataIndex<images.length){return images[dataIndex];}return null;};const getLabelForDataPoint=(labels,dataIndex)=>{if(0<=dataIndex&&dataIndex<labels.length){return labels[dataIndex];}return null;};const getOrCreateTooltip=chart=>{let tooltipEl=chart.canvas.parentNode.querySelector('div');if(!tooltipEl){tooltipEl=document.createElement('div');tooltipEl.style.background='rgba(0, 0, 0, 0.7)';tooltipEl.style.borderRadius='3px';tooltipEl.style.color='white';tooltipEl.style.opacity='1';tooltipEl.style.pointerEvents='none';tooltipEl.style.position='absolute';tooltipEl.style.transform='translate(-50%, 0)';tooltipEl.style.transition='all .1s ease';const table=document.createElement('table');table.style.margin='0px';tooltipEl.appendChild(table);chart.canvas.parentNode.appendChild(tooltipEl);}return tooltipEl;};const externalTooltipHandler=(context,images,labels,cummulative)=>{// Tooltip Element\nconst{chart,tooltip}=context;const tooltipEl=getOrCreateTooltip(chart);// Hide if no tooltip\nif(tooltip.opacity===0){tooltipEl.style.opacity='0';return;}// Set Text\nif(tooltip.body){const titleLines=tooltip.title||[];const bodyLines=tooltip.body.map(b=>b.lines);// Get the first data point under the tooltip\nconst firstPoint=tooltip.dataPoints[0];let dataIndex=firstPoint.dataIndex;if(cummulative){dataIndex-=1;}// Use datasetIndex and dataIndex to get the appropriate image\nconst imageSrc=getImageForDataPoint(images,dataIndex);const label=getLabelForDataPoint(labels,dataIndex);const tableHead=document.createElement('thead');titleLines.forEach(title=>{const tr=document.createElement('tr');tr.style.borderWidth='0';const th=document.createElement('th');th.style.borderWidth='0';const text=document.createTextNode(title);th.appendChild(text);tr.appendChild(th);tableHead.appendChild(tr);});const tableBody=document.createElement('tbody');bodyLines.forEach((body,i)=>{// Add image only for one point even when multiple points are under the cursor (logic to be improved in the future here)\nif(i===0){const img=document.createElement('img');img.src=imageSrc;img.style.height='200px';img.style.marginRight='10px';img.style.backgroundColor='white';const textAboveImage=document.createTextNode('Label: '+label);const tr=document.createElement('tr');tr.style.backgroundColor='inherit';tr.style.borderWidth='0';const td=document.createElement('td');td.style.borderWidth='0';td.style.textAlign='center';const text=document.createTextNode(body);if(imageSrc&&label){td.appendChild(textAboveImage);td.appendChild(document.createElement(\"br\"));td.appendChild(img);td.appendChild(document.createElement(\"br\"));}td.appendChild(text);tr.appendChild(td);tableBody.appendChild(tr);}});const tableRoot=tooltipEl.querySelector('table');// Remove old children\nwhile(tableRoot.firstChild){tableRoot.firstChild.remove();}// Add new children\ntableRoot.appendChild(tableHead);tableRoot.appendChild(tableBody);}const{offsetLeft:positionX,offsetTop:positionY}=chart.canvas;// Display, position, and set styles for font\ntooltipEl.style.opacity='1';tooltipEl.style.left=positionX+tooltip.caretX+'px';tooltipEl.style.top=positionY+tooltip.caretY+'px';tooltipEl.style.font=tooltip.options.bodyFont.string;tooltipEl.style.padding=tooltip.options.padding+'px '+tooltip.options.padding+'px';};","map":{"version":3,"names":["React","useEffect","useState","CategoryScale","Chart","ChartJS","Legend","LineElement","LinearScale","PointElement","Title","Tooltip","Line","FormControlLabel","Switch","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","register","cumulativeSum","numbers","cumulativeSums","i","length","push","generateRange","a","b","range","COLORS","ScoreChart","_ref","scores","pseudo","isCreator","allImages","allLabels","cummulative","setCummulative","initialScores","setInitialScores","handleChange","event","target","checked","nb_predictions","Object","values","labels","data","datasets","keys","map","player","index","label","backgroundColor","borderColor","replace","hidden","options","responsive","plugins","legend","position","title","display","text","tooltip","enabled","external","context","externalTooltipHandler","scales","x","y","children","control","onChange","inputProps","getImageForDataPoint","images","dataIndex","getLabelForDataPoint","getOrCreateTooltip","chart","tooltipEl","canvas","parentNode","querySelector","document","createElement","style","background","borderRadius","color","opacity","pointerEvents","transform","transition","table","margin","appendChild","body","titleLines","bodyLines","lines","firstPoint","dataPoints","imageSrc","tableHead","forEach","tr","borderWidth","th","createTextNode","tableBody","img","src","height","marginRight","textAboveImage","td","textAlign","tableRoot","firstChild","remove","offsetLeft","positionX","offsetTop","positionY","left","caretX","top","caretY","font","bodyFont","string","padding"],"sources":["C:/Users/vince/OneDrive/Documents/GitHub/eleusia/src/components/ScoreChart.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport {CategoryScale, Chart, Chart as ChartJS, Legend, LineElement, LinearScale, PointElement, Title, Tooltip} from 'chart.js'\r\nimport { Line } from 'react-chartjs-2'\r\nimport { FormControlLabel, Switch } from '@mui/material'\r\n\r\nChartJS.register(\r\n    CategoryScale,\r\n    LinearScale,\r\n    PointElement,\r\n    LineElement,\r\n    Title,\r\n    Tooltip,\r\n    Legend\r\n)\r\n\r\nfunction cumulativeSum(numbers: number[]) {\r\n    let cumulativeSum = 0\r\n    const cumulativeSums = [0]\r\n  \r\n    for (let i = 0; i < numbers.length; i++) {\r\n      cumulativeSum += numbers[i]\r\n      cumulativeSums.push(cumulativeSum)\r\n    }\r\n  \r\n    return cumulativeSums\r\n}\r\n\r\nfunction generateRange(a: number, b: number) {\r\n    const range: number[] = []\r\n    for (let i = a; i <= b; i++) {\r\n      range.push(i)\r\n    }\r\n    return range\r\n}\r\n\r\nconst COLORS = [\r\n  'rgba(255, 99, 132, 0.5)',\r\n  'rgba(54, 162, 235, 0.5)',\r\n  'rgba(255, 206, 86, 0.5)',\r\n  'rgba(75, 192, 192, 0.5)',\r\n  'rgba(153, 102, 255, 0.5)',\r\n  'rgba(255, 159, 64, 0.5)',\r\n  'rgba(255, 99, 132, 0.5)',\r\n  'rgba(54, 162, 235, 0.5)',\r\n]\r\n\r\n\r\nexport default function ScoreChart({scores, pseudo, isCreator, allImages, allLabels}: {scores: {[pseudo: string]: number[]}, pseudo: string, isCreator: boolean, allImages: string[], allLabels: string[]}){\r\n    const [cummulative, setCummulative] = useState(false)\r\n    const [initialScores, setInitialScores] = useState(scores) // Copie les scores dans l'état lors du montage\r\n\r\n    useEffect(() => {\r\n        setInitialScores(scores) // Met à jour initialScores seulement lors du montage\r\n    }, []) // Passer un tableau vide comme dépendance rend l'effet exécutable seulement lors du montage\r\n\r\n    const handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n        setCummulative(event.target.checked)\r\n    }\r\n\r\n    const nb_predictions = Object.values(initialScores)[0].length\r\n    const labels = cummulative ? generateRange(0, nb_predictions) : generateRange(1, nb_predictions)\r\n\r\n    const data = {\r\n        labels: labels,\r\n        datasets: Object.keys(initialScores).map((player, index) => ({\r\n            label: player,\r\n            data: cummulative ? cumulativeSum(Object.values(initialScores[player])) : Object.values(initialScores[player]),\r\n            backgroundColor: COLORS[index % COLORS.length],\r\n            borderColor: COLORS[index % COLORS.length].replace('0.5', '1'),\r\n            hidden: !isCreator && player !== pseudo,\r\n        })),\r\n    }\r\n\r\n    // Options de la chart\r\n    const options = {\r\n        responsive: true,\r\n        plugins: {\r\n            legend: {\r\n              position: 'top' as const,\r\n            },\r\n            title: {\r\n              display: true,\r\n              text: cummulative ? 'Evolution du score total' : 'Evolution de la qualité des prédictions',\r\n            },\r\n            tooltip: {\r\n              enabled: false,\r\n              external: (context) => externalTooltipHandler(context, allImages, allLabels, cummulative),\r\n            },\r\n        },\r\n        scales: {\r\n            x: {\r\n              title: {\r\n                display: true,\r\n                text: 'Prédiction',\r\n              },\r\n            },\r\n            y: {\r\n              title: {\r\n                display: true,\r\n                text: 'Score',\r\n              },\r\n            }\r\n        },\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <FormControlLabel control={<Switch checked={cummulative} onChange={handleChange} inputProps={{ 'aria-label': 'controlled' }} />} label=\"Afficher score total\" />\r\n            <Line data={data} options={options} />\r\n        </>\r\n    )\r\n  }\r\n\r\n  const getImageForDataPoint = (images: string[], dataIndex: number) => {\r\n    if (0 <= dataIndex && dataIndex < images.length) {\r\n      return images[dataIndex]\r\n    }\r\n    return null\r\n  }\r\n  const getLabelForDataPoint = (labels: string[], dataIndex: number) => {\r\n    if (0 <= dataIndex && dataIndex < labels.length) {\r\n      return labels[dataIndex]\r\n    }\r\n    return null\r\n  }\r\n\r\n  const getOrCreateTooltip = (chart: Chart<'line'>): HTMLDivElement => {\r\n    let tooltipEl = chart.canvas.parentNode.querySelector('div');\r\n  \r\n    if (!tooltipEl) {\r\n      tooltipEl = document.createElement('div');\r\n      tooltipEl.style.background = 'rgba(0, 0, 0, 0.7)';\r\n      tooltipEl.style.borderRadius = '3px';\r\n      tooltipEl.style.color = 'white';\r\n      tooltipEl.style.opacity = '1';\r\n      tooltipEl.style.pointerEvents = 'none';\r\n      tooltipEl.style.position = 'absolute';\r\n      tooltipEl.style.transform = 'translate(-50%, 0)';\r\n      tooltipEl.style.transition = 'all .1s ease';\r\n  \r\n      const table = document.createElement('table');\r\n      table.style.margin = '0px';\r\n  \r\n      tooltipEl.appendChild(table);\r\n      chart.canvas.parentNode.appendChild(tooltipEl);\r\n    }\r\n  \r\n    return tooltipEl;\r\n  };\r\n  \r\n  const externalTooltipHandler = (context, images: string[], labels: string[], cummulative: boolean) => {\r\n    // Tooltip Element\r\n    const {chart, tooltip} = context;\r\n    const tooltipEl = getOrCreateTooltip(chart);\r\n  \r\n    // Hide if no tooltip\r\n    if (tooltip.opacity === 0) {\r\n      tooltipEl.style.opacity = '0';\r\n      return;\r\n    }\r\n  \r\n    // Set Text\r\n    if (tooltip.body) {\r\n      const titleLines = tooltip.title || [];\r\n      const bodyLines = tooltip.body.map(b => b.lines);\r\n\r\n      // Get the first data point under the tooltip\r\n      const firstPoint = tooltip.dataPoints[0];\r\n      let dataIndex = firstPoint.dataIndex;\r\n      if (cummulative) {\r\n        dataIndex -= 1\r\n      }\r\n\r\n      // Use datasetIndex and dataIndex to get the appropriate image\r\n      const imageSrc = getImageForDataPoint(images, dataIndex);\r\n      const label = getLabelForDataPoint(labels, dataIndex)\r\n  \r\n      const tableHead = document.createElement('thead');\r\n  \r\n      titleLines.forEach(title => {\r\n        const tr = document.createElement('tr');\r\n        tr.style.borderWidth = '0';\r\n  \r\n        const th = document.createElement('th');\r\n        th.style.borderWidth = '0';\r\n        const text = document.createTextNode(title);\r\n  \r\n        th.appendChild(text);\r\n        tr.appendChild(th);\r\n        tableHead.appendChild(tr);\r\n      });\r\n  \r\n      const tableBody = document.createElement('tbody');\r\n      bodyLines.forEach((body, i) => {\r\n        // Add image only for one point even when multiple points are under the cursor (logic to be improved in the future here)\r\n        if (i === 0) {\r\n          const img = document.createElement('img');\r\n          img.src = imageSrc\r\n          img.style.height = '200px';\r\n          img.style.marginRight = '10px';\r\n          img.style.backgroundColor = 'white';\r\n\r\n          const textAboveImage = document.createTextNode('Label: ' + label);\r\n    \r\n          const tr = document.createElement('tr');\r\n          tr.style.backgroundColor = 'inherit';\r\n          tr.style.borderWidth = '0';\r\n    \r\n          const td = document.createElement('td');\r\n          td.style.borderWidth = '0';\r\n          td.style.textAlign = 'center';\r\n    \r\n          const text = document.createTextNode(body);\r\n    \r\n          if (imageSrc && label) {\r\n            td.appendChild(textAboveImage)\r\n            td.appendChild(document.createElement(\"br\"))\r\n            td.appendChild(img)\r\n            td.appendChild(document.createElement(\"br\"))\r\n          }\r\n          td.appendChild(text);\r\n          tr.appendChild(td);\r\n          tableBody.appendChild(tr);\r\n        }\r\n      });\r\n  \r\n      const tableRoot = tooltipEl.querySelector('table');\r\n  \r\n      // Remove old children\r\n      while (tableRoot.firstChild) {\r\n        tableRoot.firstChild.remove();\r\n      }\r\n  \r\n      // Add new children\r\n      tableRoot.appendChild(tableHead);\r\n      tableRoot.appendChild(tableBody);\r\n    }\r\n  \r\n    const {offsetLeft: positionX, offsetTop: positionY} = chart.canvas;\r\n  \r\n    // Display, position, and set styles for font\r\n    tooltipEl.style.opacity = '1';\r\n    tooltipEl.style.left = positionX + tooltip.caretX + 'px';\r\n    tooltipEl.style.top = positionY +tooltip.caretY + 'px';\r\n    tooltipEl.style.font = tooltip.options.bodyFont.string;\r\n    tooltipEl.style.padding = tooltip.options.padding + 'px ' + tooltip.options.padding + 'px';\r\n  };"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAAQC,aAAa,CAASC,KAAK,GAAI,CAAAC,OAAO,CAAEC,MAAM,CAAEC,WAAW,CAAEC,WAAW,CAAEC,YAAY,CAAEC,KAAK,CAAEC,OAAO,KAAO,UAAU,CAC/H,OAASC,IAAI,KAAQ,iBAAiB,CACtC,OAASC,gBAAgB,CAAEC,MAAM,KAAQ,eAAe,QAAAC,GAAA,IAAAC,IAAA,gCAAAC,QAAA,IAAAC,SAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAExDf,OAAO,CAACgB,QAAQ,CACZlB,aAAa,CACbK,WAAW,CACXC,YAAY,CACZF,WAAW,CACXG,KAAK,CACLC,OAAO,CACPL,MAAM,CACT,CAED,QAAS,CAAAgB,aAAaA,CAACC,OAAiB,CAAE,CACtC,GAAI,CAAAD,aAAa,CAAG,CAAC,CACrB,KAAM,CAAAE,cAAc,CAAG,CAAC,CAAC,CAAC,CAE1B,IAAK,GAAI,CAAAC,CAAC,CAAG,CAAC,CAAEA,CAAC,CAAGF,OAAO,CAACG,MAAM,CAAED,CAAC,EAAE,CAAE,CACvCH,aAAa,EAAIC,OAAO,CAACE,CAAC,CAAC,CAC3BD,cAAc,CAACG,IAAI,CAACL,aAAa,CAAC,CACpC,CAEA,MAAO,CAAAE,cAAc,CACzB,CAEA,QAAS,CAAAI,aAAaA,CAACC,CAAS,CAAEC,CAAS,CAAE,CACzC,KAAM,CAAAC,KAAe,CAAG,EAAE,CAC1B,IAAK,GAAI,CAAAN,CAAC,CAAGI,CAAC,CAAEJ,CAAC,EAAIK,CAAC,CAAEL,CAAC,EAAE,CAAE,CAC3BM,KAAK,CAACJ,IAAI,CAACF,CAAC,CAAC,CACf,CACA,MAAO,CAAAM,KAAK,CAChB,CAEA,KAAM,CAAAC,MAAM,CAAG,CACb,yBAAyB,CACzB,yBAAyB,CACzB,yBAAyB,CACzB,yBAAyB,CACzB,0BAA0B,CAC1B,yBAAyB,CACzB,yBAAyB,CACzB,yBAAyB,CAC1B,CAGD,cAAe,SAAS,CAAAC,UAAUA,CAAAC,IAAA,CAAyK,IAAxK,CAACC,MAAM,CAAEC,MAAM,CAAEC,SAAS,CAAEC,SAAS,CAAEC,SAA+H,CAAC,CAAAL,IAAA,CACtM,KAAM,CAACM,WAAW,CAAEC,cAAc,CAAC,CAAGvC,QAAQ,CAAC,KAAK,CAAC,CACrD,KAAM,CAACwC,aAAa,CAAEC,gBAAgB,CAAC,CAAGzC,QAAQ,CAACiC,MAAM,CAAC,CAAC;AAE3DlC,SAAS,CAAC,IAAM,CACZ0C,gBAAgB,CAACR,MAAM,CAAC,CAAC;AAC7B,CAAC,CAAE,EAAE,CAAC,CAAC;AAEP,KAAM,CAAAS,YAAY,CAAIC,KAA0C,EAAK,CACjEJ,cAAc,CAACI,KAAK,CAACC,MAAM,CAACC,OAAO,CAAC,CACxC,CAAC,CAED,KAAM,CAAAC,cAAc,CAAGC,MAAM,CAACC,MAAM,CAACR,aAAa,CAAC,CAAC,CAAC,CAAC,CAAChB,MAAM,CAC7D,KAAM,CAAAyB,MAAM,CAAGX,WAAW,CAAGZ,aAAa,CAAC,CAAC,CAAEoB,cAAc,CAAC,CAAGpB,aAAa,CAAC,CAAC,CAAEoB,cAAc,CAAC,CAEhG,KAAM,CAAAI,IAAI,CAAG,CACTD,MAAM,CAAEA,MAAM,CACdE,QAAQ,CAAEJ,MAAM,CAACK,IAAI,CAACZ,aAAa,CAAC,CAACa,GAAG,CAAC,CAACC,MAAM,CAAEC,KAAK,IAAM,CACzDC,KAAK,CAAEF,MAAM,CACbJ,IAAI,CAAEZ,WAAW,CAAGlB,aAAa,CAAC2B,MAAM,CAACC,MAAM,CAACR,aAAa,CAACc,MAAM,CAAC,CAAC,CAAC,CAAGP,MAAM,CAACC,MAAM,CAACR,aAAa,CAACc,MAAM,CAAC,CAAC,CAC9GG,eAAe,CAAE3B,MAAM,CAACyB,KAAK,CAAGzB,MAAM,CAACN,MAAM,CAAC,CAC9CkC,WAAW,CAAE5B,MAAM,CAACyB,KAAK,CAAGzB,MAAM,CAACN,MAAM,CAAC,CAACmC,OAAO,CAAC,KAAK,CAAE,GAAG,CAAC,CAC9DC,MAAM,CAAE,CAACzB,SAAS,EAAImB,MAAM,GAAKpB,MACrC,CAAC,CAAC,CACN,CAAC,CAED;AACA,KAAM,CAAA2B,OAAO,CAAG,CACZC,UAAU,CAAE,IAAI,CAChBC,OAAO,CAAE,CACLC,MAAM,CAAE,CACNC,QAAQ,CAAE,KACZ,CAAC,CACDC,KAAK,CAAE,CACLC,OAAO,CAAE,IAAI,CACbC,IAAI,CAAE9B,WAAW,CAAG,0BAA0B,CAAG,yCACnD,CAAC,CACD+B,OAAO,CAAE,CACPC,OAAO,CAAE,KAAK,CACdC,QAAQ,CAAGC,OAAO,EAAKC,sBAAsB,CAACD,OAAO,CAAEpC,SAAS,CAAEC,SAAS,CAAEC,WAAW,CAC1F,CACJ,CAAC,CACDoC,MAAM,CAAE,CACJC,CAAC,CAAE,CACDT,KAAK,CAAE,CACLC,OAAO,CAAE,IAAI,CACbC,IAAI,CAAE,YACR,CACF,CAAC,CACDQ,CAAC,CAAE,CACDV,KAAK,CAAE,CACLC,OAAO,CAAE,IAAI,CACbC,IAAI,CAAE,OACR,CACF,CACJ,CACJ,CAAC,CAED,mBACIlD,KAAA,CAAAF,SAAA,EAAA6D,QAAA,eACI/D,IAAA,CAACH,gBAAgB,EAACmE,OAAO,cAAEhE,IAAA,CAACF,MAAM,EAACiC,OAAO,CAAEP,WAAY,CAACyC,QAAQ,CAAErC,YAAa,CAACsC,UAAU,CAAE,CAAE,YAAY,CAAE,YAAa,CAAE,EAAI,CAACxB,KAAK,CAAC,sBAAsB,EAAG,cAChK1C,IAAA,CAACJ,IAAI,EAACwC,IAAI,CAAEA,IAAK,CAACW,OAAO,CAAEA,OAAQ,EAAG,GACvC,CAET,CAEA,KAAM,CAAAoB,oBAAoB,CAAGA,CAACC,MAAgB,CAAEC,SAAiB,GAAK,CACpE,GAAI,CAAC,EAAIA,SAAS,EAAIA,SAAS,CAAGD,MAAM,CAAC1D,MAAM,CAAE,CAC/C,MAAO,CAAA0D,MAAM,CAACC,SAAS,CAAC,CAC1B,CACA,MAAO,KAAI,CACb,CAAC,CACD,KAAM,CAAAC,oBAAoB,CAAGA,CAACnC,MAAgB,CAAEkC,SAAiB,GAAK,CACpE,GAAI,CAAC,EAAIA,SAAS,EAAIA,SAAS,CAAGlC,MAAM,CAACzB,MAAM,CAAE,CAC/C,MAAO,CAAAyB,MAAM,CAACkC,SAAS,CAAC,CAC1B,CACA,MAAO,KAAI,CACb,CAAC,CAED,KAAM,CAAAE,kBAAkB,CAAIC,KAAoB,EAAqB,CACnE,GAAI,CAAAC,SAAS,CAAGD,KAAK,CAACE,MAAM,CAACC,UAAU,CAACC,aAAa,CAAC,KAAK,CAAC,CAE5D,GAAI,CAACH,SAAS,CAAE,CACdA,SAAS,CAAGI,QAAQ,CAACC,aAAa,CAAC,KAAK,CAAC,CACzCL,SAAS,CAACM,KAAK,CAACC,UAAU,CAAG,oBAAoB,CACjDP,SAAS,CAACM,KAAK,CAACE,YAAY,CAAG,KAAK,CACpCR,SAAS,CAACM,KAAK,CAACG,KAAK,CAAG,OAAO,CAC/BT,SAAS,CAACM,KAAK,CAACI,OAAO,CAAG,GAAG,CAC7BV,SAAS,CAACM,KAAK,CAACK,aAAa,CAAG,MAAM,CACtCX,SAAS,CAACM,KAAK,CAAC5B,QAAQ,CAAG,UAAU,CACrCsB,SAAS,CAACM,KAAK,CAACM,SAAS,CAAG,oBAAoB,CAChDZ,SAAS,CAACM,KAAK,CAACO,UAAU,CAAG,cAAc,CAE3C,KAAM,CAAAC,KAAK,CAAGV,QAAQ,CAACC,aAAa,CAAC,OAAO,CAAC,CAC7CS,KAAK,CAACR,KAAK,CAACS,MAAM,CAAG,KAAK,CAE1Bf,SAAS,CAACgB,WAAW,CAACF,KAAK,CAAC,CAC5Bf,KAAK,CAACE,MAAM,CAACC,UAAU,CAACc,WAAW,CAAChB,SAAS,CAAC,CAChD,CAEA,MAAO,CAAAA,SAAS,CAClB,CAAC,CAED,KAAM,CAAAd,sBAAsB,CAAGA,CAACD,OAAO,CAAEU,MAAgB,CAAEjC,MAAgB,CAAEX,WAAoB,GAAK,CACpG;AACA,KAAM,CAACgD,KAAK,CAAEjB,OAAO,CAAC,CAAGG,OAAO,CAChC,KAAM,CAAAe,SAAS,CAAGF,kBAAkB,CAACC,KAAK,CAAC,CAE3C;AACA,GAAIjB,OAAO,CAAC4B,OAAO,GAAK,CAAC,CAAE,CACzBV,SAAS,CAACM,KAAK,CAACI,OAAO,CAAG,GAAG,CAC7B,OACF,CAEA;AACA,GAAI5B,OAAO,CAACmC,IAAI,CAAE,CAChB,KAAM,CAAAC,UAAU,CAAGpC,OAAO,CAACH,KAAK,EAAI,EAAE,CACtC,KAAM,CAAAwC,SAAS,CAAGrC,OAAO,CAACmC,IAAI,CAACnD,GAAG,CAACzB,CAAC,EAAIA,CAAC,CAAC+E,KAAK,CAAC,CAEhD;AACA,KAAM,CAAAC,UAAU,CAAGvC,OAAO,CAACwC,UAAU,CAAC,CAAC,CAAC,CACxC,GAAI,CAAA1B,SAAS,CAAGyB,UAAU,CAACzB,SAAS,CACpC,GAAI7C,WAAW,CAAE,CACf6C,SAAS,EAAI,CAAC,CAChB,CAEA;AACA,KAAM,CAAA2B,QAAQ,CAAG7B,oBAAoB,CAACC,MAAM,CAAEC,SAAS,CAAC,CACxD,KAAM,CAAA3B,KAAK,CAAG4B,oBAAoB,CAACnC,MAAM,CAAEkC,SAAS,CAAC,CAErD,KAAM,CAAA4B,SAAS,CAAGpB,QAAQ,CAACC,aAAa,CAAC,OAAO,CAAC,CAEjDa,UAAU,CAACO,OAAO,CAAC9C,KAAK,EAAI,CAC1B,KAAM,CAAA+C,EAAE,CAAGtB,QAAQ,CAACC,aAAa,CAAC,IAAI,CAAC,CACvCqB,EAAE,CAACpB,KAAK,CAACqB,WAAW,CAAG,GAAG,CAE1B,KAAM,CAAAC,EAAE,CAAGxB,QAAQ,CAACC,aAAa,CAAC,IAAI,CAAC,CACvCuB,EAAE,CAACtB,KAAK,CAACqB,WAAW,CAAG,GAAG,CAC1B,KAAM,CAAA9C,IAAI,CAAGuB,QAAQ,CAACyB,cAAc,CAAClD,KAAK,CAAC,CAE3CiD,EAAE,CAACZ,WAAW,CAACnC,IAAI,CAAC,CACpB6C,EAAE,CAACV,WAAW,CAACY,EAAE,CAAC,CAClBJ,SAAS,CAACR,WAAW,CAACU,EAAE,CAAC,CAC3B,CAAC,CAAC,CAEF,KAAM,CAAAI,SAAS,CAAG1B,QAAQ,CAACC,aAAa,CAAC,OAAO,CAAC,CACjDc,SAAS,CAACM,OAAO,CAAC,CAACR,IAAI,CAAEjF,CAAC,GAAK,CAC7B;AACA,GAAIA,CAAC,GAAK,CAAC,CAAE,CACX,KAAM,CAAA+F,GAAG,CAAG3B,QAAQ,CAACC,aAAa,CAAC,KAAK,CAAC,CACzC0B,GAAG,CAACC,GAAG,CAAGT,QAAQ,CAClBQ,GAAG,CAACzB,KAAK,CAAC2B,MAAM,CAAG,OAAO,CAC1BF,GAAG,CAACzB,KAAK,CAAC4B,WAAW,CAAG,MAAM,CAC9BH,GAAG,CAACzB,KAAK,CAACpC,eAAe,CAAG,OAAO,CAEnC,KAAM,CAAAiE,cAAc,CAAG/B,QAAQ,CAACyB,cAAc,CAAC,SAAS,CAAG5D,KAAK,CAAC,CAEjE,KAAM,CAAAyD,EAAE,CAAGtB,QAAQ,CAACC,aAAa,CAAC,IAAI,CAAC,CACvCqB,EAAE,CAACpB,KAAK,CAACpC,eAAe,CAAG,SAAS,CACpCwD,EAAE,CAACpB,KAAK,CAACqB,WAAW,CAAG,GAAG,CAE1B,KAAM,CAAAS,EAAE,CAAGhC,QAAQ,CAACC,aAAa,CAAC,IAAI,CAAC,CACvC+B,EAAE,CAAC9B,KAAK,CAACqB,WAAW,CAAG,GAAG,CAC1BS,EAAE,CAAC9B,KAAK,CAAC+B,SAAS,CAAG,QAAQ,CAE7B,KAAM,CAAAxD,IAAI,CAAGuB,QAAQ,CAACyB,cAAc,CAACZ,IAAI,CAAC,CAE1C,GAAIM,QAAQ,EAAItD,KAAK,CAAE,CACrBmE,EAAE,CAACpB,WAAW,CAACmB,cAAc,CAAC,CAC9BC,EAAE,CAACpB,WAAW,CAACZ,QAAQ,CAACC,aAAa,CAAC,IAAI,CAAC,CAAC,CAC5C+B,EAAE,CAACpB,WAAW,CAACe,GAAG,CAAC,CACnBK,EAAE,CAACpB,WAAW,CAACZ,QAAQ,CAACC,aAAa,CAAC,IAAI,CAAC,CAAC,CAC9C,CACA+B,EAAE,CAACpB,WAAW,CAACnC,IAAI,CAAC,CACpB6C,EAAE,CAACV,WAAW,CAACoB,EAAE,CAAC,CAClBN,SAAS,CAACd,WAAW,CAACU,EAAE,CAAC,CAC3B,CACF,CAAC,CAAC,CAEF,KAAM,CAAAY,SAAS,CAAGtC,SAAS,CAACG,aAAa,CAAC,OAAO,CAAC,CAElD;AACA,MAAOmC,SAAS,CAACC,UAAU,CAAE,CAC3BD,SAAS,CAACC,UAAU,CAACC,MAAM,EAAE,CAC/B,CAEA;AACAF,SAAS,CAACtB,WAAW,CAACQ,SAAS,CAAC,CAChCc,SAAS,CAACtB,WAAW,CAACc,SAAS,CAAC,CAClC,CAEA,KAAM,CAACW,UAAU,CAAEC,SAAS,CAAEC,SAAS,CAAEC,SAAS,CAAC,CAAG7C,KAAK,CAACE,MAAM,CAElE;AACAD,SAAS,CAACM,KAAK,CAACI,OAAO,CAAG,GAAG,CAC7BV,SAAS,CAACM,KAAK,CAACuC,IAAI,CAAGH,SAAS,CAAG5D,OAAO,CAACgE,MAAM,CAAG,IAAI,CACxD9C,SAAS,CAACM,KAAK,CAACyC,GAAG,CAAGH,SAAS,CAAE9D,OAAO,CAACkE,MAAM,CAAG,IAAI,CACtDhD,SAAS,CAACM,KAAK,CAAC2C,IAAI,CAAGnE,OAAO,CAACR,OAAO,CAAC4E,QAAQ,CAACC,MAAM,CACtDnD,SAAS,CAACM,KAAK,CAAC8C,OAAO,CAAGtE,OAAO,CAACR,OAAO,CAAC8E,OAAO,CAAG,KAAK,CAAGtE,OAAO,CAACR,OAAO,CAAC8E,OAAO,CAAG,IAAI,CAC5F,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}