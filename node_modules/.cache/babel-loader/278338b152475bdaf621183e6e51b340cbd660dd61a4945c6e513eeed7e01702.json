{"ast":null,"code":"import _slicedToArray from\"C:/Users/vince/OneDrive/Documents/GitHub/eleusia/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import{CategoryScale,Chart as ChartJS,Legend,LineElement,LinearScale,PointElement,Title,Tooltip}from'chart.js';import{Line}from'react-chartjs-2';import{FormControlLabel,Switch}from'@mui/material';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";ChartJS.register(CategoryScale,LinearScale,PointElement,LineElement,Title,Tooltip,Legend);function cumulativeSum(numbers){var cumulativeSum=0;var cumulativeSums=[0];for(var i=0;i<numbers.length;i++){cumulativeSum+=numbers[i];cumulativeSums.push(cumulativeSum);}return cumulativeSums;}function generateRange(a,b){var range=[];for(var i=a;i<=b;i++){range.push(i);}return range;}export default function ScoreChart(_ref){var scores=_ref.scores,pseudo=_ref.pseudo,isCreator=_ref.isCreator;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),cummulative=_useState2[0],setCummulative=_useState2[1];var handleChange=function handleChange(event){setCummulative(event.target.checked);};var nb_predictions=Object.values(scores)[0].length;var labels=cummulative?generateRange(0,nb_predictions):generateRange(1,nb_predictions);var data={labels:labels,datasets:Object.keys(scores).map(function(player,index){return{label:player,data:cummulative?cumulativeSum(Object.values(scores[player])):Object.values(scores[player]),backgroundColor:\"rgba(\".concat(index*50,\", \").concat(index*100,\", \").concat(index*150,\", 0.5)\"),// Couleur de fond pour chaque joueur\nborderColor:\"rgba(\".concat(index*50,\", \").concat(index*100,\", \").concat(index*150,\", 1)\"),// Couleur de bordure pour chaque joueur\nhidden:!isCreator&&player!==pseudo};})};// Options de la chart\nvar options={responsive:true,plugins:{legend:{position:'top'},title:{display:true,text:cummulative?'Evolution du score total':'Evolution de la qualité des prédictions'}},scales:{x:{title:{display:true,text:'Prédiction'}},y:{title:{display:true,text:'Score'}}}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(FormControlLabel,{sx:{marginBottom:2},control:/*#__PURE__*/_jsx(Switch,{checked:cummulative,onChange:handleChange,inputProps:{'aria-label':'controlled'}}),label:\"Afficher score total\"}),/*#__PURE__*/_jsx(Line,{data:data,options:options})]});}","map":{"version":3,"names":["React","useState","CategoryScale","Chart","ChartJS","Legend","LineElement","LinearScale","PointElement","Title","Tooltip","Line","FormControlLabel","Switch","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","register","cumulativeSum","numbers","cumulativeSums","i","length","push","generateRange","a","b","range","ScoreChart","_ref","scores","pseudo","isCreator","_useState","_useState2","_slicedToArray","cummulative","setCummulative","handleChange","event","target","checked","nb_predictions","Object","values","labels","data","datasets","keys","map","player","index","label","backgroundColor","concat","borderColor","hidden","options","responsive","plugins","legend","position","title","display","text","scales","x","y","children","sx","marginBottom","control","onChange","inputProps"],"sources":["C:/Users/vince/OneDrive/Documents/GitHub/eleusia/src/components/ScoreChart.tsx"],"sourcesContent":["import React, { useState } from 'react'\r\nimport {CategoryScale, Chart as ChartJS, Legend, LineElement, LinearScale, PointElement, Title, Tooltip} from 'chart.js'\r\nimport { Line } from 'react-chartjs-2'\r\nimport { FormControlLabel, Switch } from '@mui/material'\r\n\r\nChartJS.register(\r\n    CategoryScale,\r\n    LinearScale,\r\n    PointElement,\r\n    LineElement,\r\n    Title,\r\n    Tooltip,\r\n    Legend\r\n)\r\n\r\nfunction cumulativeSum(numbers: number[]) {\r\n    let cumulativeSum = 0\r\n    const cumulativeSums = [0]\r\n  \r\n    for (let i = 0; i < numbers.length; i++) {\r\n      cumulativeSum += numbers[i]\r\n      cumulativeSums.push(cumulativeSum)\r\n    }\r\n  \r\n    return cumulativeSums\r\n}\r\n\r\nfunction generateRange(a: number, b: number) {\r\n    const range: number[] = []\r\n    for (let i = a; i <= b; i++) {\r\n      range.push(i)\r\n    }\r\n    return range\r\n}\r\n\r\nexport default function ScoreChart({scores, pseudo, isCreator}: {scores: {[pseudo: string]: number[]}, pseudo: string, isCreator: boolean}){\r\n    const [cummulative, setCummulative] = useState(false)\r\n\r\n    const handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n        setCummulative(event.target.checked)\r\n    }\r\n\r\n    const nb_predictions = Object.values(scores)[0].length\r\n    const labels = cummulative ? generateRange(0, nb_predictions) : generateRange(1, nb_predictions)\r\n\r\n    const data = {\r\n        labels: labels,\r\n        datasets: Object.keys(scores).map((player, index) => ({\r\n            label: player,\r\n            data: cummulative ? cumulativeSum(Object.values(scores[player])) : Object.values(scores[player]),\r\n            backgroundColor: `rgba(${index * 50}, ${index * 100}, ${index * 150}, 0.5)`, // Couleur de fond pour chaque joueur\r\n            borderColor: `rgba(${index * 50}, ${index * 100}, ${index * 150}, 1)`, // Couleur de bordure pour chaque joueur\r\n            hidden: !isCreator && player !== pseudo,\r\n        })),\r\n    }\r\n\r\n    // Options de la chart\r\n    const options = {\r\n        responsive: true,\r\n        plugins: {\r\n            legend: {\r\n              position: 'top' as const,\r\n            },\r\n            title: {\r\n              display: true,\r\n              text: cummulative ? 'Evolution du score total' : 'Evolution de la qualité des prédictions',\r\n            },\r\n        },\r\n        scales: {\r\n            x: {\r\n              title: {\r\n                display: true,\r\n                text: 'Prédiction',\r\n              },\r\n            },\r\n            y: {\r\n              title: {\r\n                display: true,\r\n                text: 'Score',\r\n              },\r\n            }\r\n        },\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <FormControlLabel sx={{marginBottom: 2}} control={<Switch checked={cummulative} onChange={handleChange} inputProps={{ 'aria-label': 'controlled' }} />} label=\"Afficher score total\" />\r\n            <Line data={data} options={options} />\r\n        </>\r\n    )\r\n  }"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}