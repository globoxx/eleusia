{"ast":null,"code":"import{Modal,Box,Typography,Backdrop,Fade,Button}from\"@mui/material\";import React from\"react\";import ScoreChart from\"../ScoreChart\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const style={position:'absolute',top:'50%',left:'50%',transform:'translate(-50%, -50%)',width:500,maxWdith:'90vw',maxHeight:'90vh',overflow:'auto',bgcolor:'background.paper',border:'2px solid #000',boxShadow:24,p:4};function EndOfGameModal(_ref){let{rule,open,users,pseudo,creatorPseudo,images,labels}=_ref;const scores=Object.assign({},...Object.entries(users).filter(_ref2=>{let[pseudo]=_ref2;return pseudo!==creatorPseudo;}).map(_ref3=>{let[pseudo,user]=_ref3;return{[pseudo]:user.allScores};}));const scoresReadyToShow=open&&Object.keys(scores).length>0&&Object.values(scores).every(userScores=>userScores.length>0);return/*#__PURE__*/_jsx(Modal,{open:open,\"aria-labelledby\":\"modal-modal-title\",\"aria-describedby\":\"modal-modal-description\",closeAfterTransition:true,slots:{backdrop:Backdrop},slotProps:{backdrop:{timeout:500}},children:/*#__PURE__*/_jsx(Fade,{in:open,children:/*#__PURE__*/_jsxs(Box,{sx:style,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h3\",component:\"h2\",children:\"La partie est termin\\xE9e !\"}),/*#__PURE__*/_jsxs(Typography,{marginTop:5,sx:{marginBottom:2},children:[\"La r\\xE8gle \\xE9tait : \",/*#__PURE__*/_jsx(\"em\",{children:rule})]}),/*#__PURE__*/_jsx(\"div\",{children:scoresReadyToShow&&/*#__PURE__*/_jsx(ScoreChart,{scores:scores,pseudo:pseudo,isCreator:pseudo===creatorPseudo,allImages:images,allLabels:labels})}),/*#__PURE__*/_jsx(Box,{textAlign:\"center\",children:/*#__PURE__*/_jsx(Button,{sx:{marginTop:5},variant:\"contained\",color:\"success\",onClick:()=>window.location.reload(),children:\"Revenir \\xE0 l'accueil\"})})]})})});}export default EndOfGameModal;","map":{"version":3,"names":["Modal","Box","Typography","Backdrop","Fade","Button","React","ScoreChart","jsx","_jsx","jsxs","_jsxs","style","position","top","left","transform","width","maxWdith","maxHeight","overflow","bgcolor","border","boxShadow","p","EndOfGameModal","_ref","rule","open","users","pseudo","creatorPseudo","images","labels","scores","Object","assign","entries","filter","_ref2","map","_ref3","user","allScores","scoresReadyToShow","keys","length","values","every","userScores","closeAfterTransition","slots","backdrop","slotProps","timeout","children","in","sx","variant","component","marginTop","marginBottom","isCreator","allImages","allLabels","textAlign","color","onClick","window","location","reload"],"sources":["C:/Users/vince/OneDrive/Documents/GitHub/eleusia/src/components/Modals/EndOfGameModal.tsx"],"sourcesContent":["import { Modal, Box, Typography, Backdrop, Fade, Button } from \"@mui/material\"\r\nimport React from \"react\"\r\nimport ScoreChart from \"../ScoreChart\"\r\nimport { User } from \"../../../server\"\r\n\r\nconst style = {\r\n    position: 'absolute' as 'absolute',\r\n    top: '50%',\r\n    left: '50%',\r\n    transform: 'translate(-50%, -50%)',\r\n    width: 500,\r\n    maxWdith: '90vw',\r\n    maxHeight: '90vh',\r\n    overflow: 'auto',\r\n    bgcolor: 'background.paper',\r\n    border: '2px solid #000',\r\n    boxShadow: 24,\r\n    p: 4,\r\n}\r\n\r\nfunction EndOfGameModal({rule, open, users, pseudo, creatorPseudo, images, labels}: {rule: string, open: boolean, users: {[pseudo: string]: User}, pseudo: string, creatorPseudo: string, images: string[], labels: string[]}) {\r\n    const scores: {[pseudo: string]: number[]} = Object.assign({}, ...Object.entries(users).filter(([pseudo,]) => pseudo !== creatorPseudo).map(([pseudo, user]) => ({[pseudo]: user.allScores})))\r\n    const scoresReadyToShow = open && Object.keys(scores).length > 0 && Object.values(scores).every(userScores => userScores.length > 0)\r\n    return (\r\n        <Modal\r\n            open={open}\r\n            aria-labelledby=\"modal-modal-title\"\r\n            aria-describedby=\"modal-modal-description\"\r\n            closeAfterTransition\r\n            slots={{ backdrop: Backdrop }}\r\n            slotProps={{\r\n            backdrop: {\r\n                timeout: 500,\r\n            },\r\n            }}\r\n        >\r\n            <Fade in={open}>\r\n                <Box sx={style}>\r\n                    <Typography variant=\"h3\" component=\"h2\">\r\n                        La partie est terminée !\r\n                    </Typography>\r\n                    <Typography marginTop={5} sx={{marginBottom: 2}}>\r\n                        La règle était : <em>{rule}</em>\r\n                    </Typography>\r\n                    \r\n                    <div>\r\n                        {scoresReadyToShow && <ScoreChart scores={scores} pseudo={pseudo} isCreator={pseudo === creatorPseudo} allImages={images} allLabels={labels} />}\r\n                    </div>\r\n\r\n                    <Box textAlign='center'>\r\n                       <Button sx={{marginTop: 5}} variant=\"contained\" color=\"success\" onClick={() => window.location.reload()}>\r\n                            Revenir à l'accueil\r\n                        </Button> \r\n                    </Box>\r\n                </Box>\r\n            </Fade>\r\n        </Modal>\r\n    )\r\n}\r\n\r\nexport default EndOfGameModal"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}