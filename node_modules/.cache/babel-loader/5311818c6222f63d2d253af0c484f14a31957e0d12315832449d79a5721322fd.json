{"ast":null,"code":"import _slicedToArray from\"C:/Users/vince/OneDrive/Documents/GitHub/eleusia/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useRef,useState}from\"react\";import{CountdownCircleTimer}from\"react-countdown-circle-timer\";import\"./Timer.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function RenderTime(_ref){var remainingTime=_ref.remainingTime;var currentTime=useRef(remainingTime);var prevTime=useRef(null);var isNewTimeFirstTick=useRef(false);var _useState=useState(0),_useState2=_slicedToArray(_useState,2),setOneLastRerender=_useState2[1];if(currentTime.current!==remainingTime){isNewTimeFirstTick.current=true;prevTime.current=currentTime.current;currentTime.current=remainingTime;}else{isNewTimeFirstTick.current=false;}// force one last re-render when the time is over to tirgger the last animation\nif(remainingTime===0){setTimeout(function(){setOneLastRerender(function(val){return val+1;});},20);}var isTimeUp=isNewTimeFirstTick.current;return/*#__PURE__*/_jsxs(\"div\",{className:\"time-wrapper\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"time \".concat(isTimeUp?\"up\":\"\"),children:remainingTime},remainingTime),prevTime.current!==null&&/*#__PURE__*/_jsx(\"div\",{className:\"time \".concat(!isTimeUp?\"down\":\"\"),children:prevTime.current},prevTime.current)]});}function Timer(_ref2){var key=_ref2.key,isPlaying=_ref2.isPlaying,roundDuration=_ref2.roundDuration;return/*#__PURE__*/_jsx(\"div\",{className:\"timer-wrapper\",children:/*#__PURE__*/_jsx(CountdownCircleTimer,{isPlaying:isPlaying,duration:roundDuration,colors:[\"#004777\",\"#F7B801\",\"#A30000\",\"#A30000\"],colorsTime:[roundDuration,roundDuration*0.66,roundDuration*0.33,0],children:RenderTime},key)});}export default Timer;","map":{"version":3,"names":["React","useRef","useState","CountdownCircleTimer","jsx","_jsx","jsxs","_jsxs","RenderTime","_ref","remainingTime","currentTime","prevTime","isNewTimeFirstTick","_useState","_useState2","_slicedToArray","setOneLastRerender","current","setTimeout","val","isTimeUp","className","children","concat","Timer","_ref2","key","isPlaying","roundDuration","duration","colors","colorsTime"],"sources":["C:/Users/vince/OneDrive/Documents/GitHub/eleusia/src/components/Timer.tsx"],"sourcesContent":["import React, { useRef, useState } from \"react\"\r\nimport { CountdownCircleTimer } from \"react-countdown-circle-timer\"\r\nimport \"./Timer.css\"\r\n\r\nfunction RenderTime({ remainingTime }: {remainingTime: number}) {\r\n    const currentTime = useRef(remainingTime);\r\n    const prevTime = useRef<number | null>(null);\r\n    const isNewTimeFirstTick = useRef(false);\r\n    const [, setOneLastRerender] = useState(0);\r\n  \r\n    if (currentTime.current !== remainingTime) {\r\n      isNewTimeFirstTick.current = true;\r\n      prevTime.current = currentTime.current;\r\n      currentTime.current = remainingTime;\r\n    } else {\r\n      isNewTimeFirstTick.current = false;\r\n    }\r\n  \r\n    // force one last re-render when the time is over to tirgger the last animation\r\n    if (remainingTime === 0) {\r\n      setTimeout(() => {\r\n        setOneLastRerender((val) => val + 1);\r\n      }, 20);\r\n    }\r\n  \r\n    const isTimeUp = isNewTimeFirstTick.current;\r\n  \r\n    return (\r\n      <div className=\"time-wrapper\">\r\n        <div key={remainingTime} className={`time ${isTimeUp ? \"up\" : \"\"}`}>\r\n          {remainingTime}\r\n        </div>\r\n        {prevTime.current !== null && (\r\n          <div\r\n            key={prevTime.current}\r\n            className={`time ${!isTimeUp ? \"down\" : \"\"}`}\r\n          >\r\n            {prevTime.current}\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n  \r\nfunction Timer({key, isPlaying, roundDuration}: {key: number, isPlaying: boolean, roundDuration: number}) {  \r\n    return (\r\n    <div className=\"timer-wrapper\">\r\n        <CountdownCircleTimer\r\n            key={key}\r\n            isPlaying={isPlaying}\r\n            duration={roundDuration}\r\n            colors={[\"#004777\", \"#F7B801\", \"#A30000\", \"#A30000\"]}\r\n            colorsTime={[roundDuration, roundDuration*0.66, roundDuration*0.33, 0]}\r\n        >\r\n            {RenderTime}\r\n        </CountdownCircleTimer>\r\n      </div>\r\n    )\r\n}\r\n\r\nexport default Timer\r\n"],"mappings":"sIAAA,MAAO,CAAAA,KAAK,EAAIC,MAAM,CAAEC,QAAQ,KAAQ,OAAO,CAC/C,OAASC,oBAAoB,KAAQ,8BAA8B,CACnE,MAAO,aAAa,QAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAEpB,QAAS,CAAAC,UAAUA,CAAAC,IAAA,CAA6C,IAA1C,CAAAC,aAAa,CAAAD,IAAA,CAAbC,aAAa,CAC/B,GAAM,CAAAC,WAAW,CAAGV,MAAM,CAACS,aAAa,CAAC,CACzC,GAAM,CAAAE,QAAQ,CAAGX,MAAM,CAAgB,IAAI,CAAC,CAC5C,GAAM,CAAAY,kBAAkB,CAAGZ,MAAM,CAAC,KAAK,CAAC,CACxC,IAAAa,SAAA,CAA+BZ,QAAQ,CAAC,CAAC,CAAC,CAAAa,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAAjCG,kBAAkB,CAAAF,UAAA,IAE3B,GAAIJ,WAAW,CAACO,OAAO,GAAKR,aAAa,CAAE,CACzCG,kBAAkB,CAACK,OAAO,CAAG,IAAI,CACjCN,QAAQ,CAACM,OAAO,CAAGP,WAAW,CAACO,OAAO,CACtCP,WAAW,CAACO,OAAO,CAAGR,aAAa,CACrC,CAAC,IAAM,CACLG,kBAAkB,CAACK,OAAO,CAAG,KAAK,CACpC,CAEA;AACA,GAAIR,aAAa,GAAK,CAAC,CAAE,CACvBS,UAAU,CAAC,UAAM,CACfF,kBAAkB,CAAC,SAACG,GAAG,QAAK,CAAAA,GAAG,CAAG,CAAC,GAAC,CACtC,CAAC,CAAE,EAAE,CAAC,CACR,CAEA,GAAM,CAAAC,QAAQ,CAAGR,kBAAkB,CAACK,OAAO,CAE3C,mBACEX,KAAA,QAAKe,SAAS,CAAC,cAAc,CAAAC,QAAA,eAC3BlB,IAAA,QAAyBiB,SAAS,SAAAE,MAAA,CAAUH,QAAQ,CAAG,IAAI,CAAG,EAAE,CAAG,CAAAE,QAAA,CAChEb,aAAa,EADNA,aAAa,CAEjB,CACLE,QAAQ,CAACM,OAAO,GAAK,IAAI,eACxBb,IAAA,QAEEiB,SAAS,SAAAE,MAAA,CAAU,CAACH,QAAQ,CAAG,MAAM,CAAG,EAAE,CAAG,CAAAE,QAAA,CAE5CX,QAAQ,CAACM,OAAO,EAHZN,QAAQ,CAACM,OAAO,CAKxB,GACG,CAEV,CAEF,QAAS,CAAAO,KAAKA,CAAAC,KAAA,CAA4F,IAA1F,CAAAC,GAAG,CAAAD,KAAA,CAAHC,GAAG,CAAEC,SAAS,CAAAF,KAAA,CAATE,SAAS,CAAEC,aAAa,CAAAH,KAAA,CAAbG,aAAa,CACzC,mBACAxB,IAAA,QAAKiB,SAAS,CAAC,eAAe,CAAAC,QAAA,cAC1BlB,IAAA,CAACF,oBAAoB,EAEjByB,SAAS,CAAEA,SAAU,CACrBE,QAAQ,CAAED,aAAc,CACxBE,MAAM,CAAE,CAAC,SAAS,CAAE,SAAS,CAAE,SAAS,CAAE,SAAS,CAAE,CACrDC,UAAU,CAAE,CAACH,aAAa,CAAEA,aAAa,CAAC,IAAI,CAAEA,aAAa,CAAC,IAAI,CAAE,CAAC,CAAE,CAAAN,QAAA,CAEtEf,UAAU,EANNmB,GAAG,CAOW,EACnB,CAEZ,CAEA,cAAe,CAAAF,KAAK"},"metadata":{},"sourceType":"module","externalDependencies":[]}