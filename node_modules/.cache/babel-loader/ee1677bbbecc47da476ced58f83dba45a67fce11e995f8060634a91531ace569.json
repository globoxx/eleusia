{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\vince\\\\OneDrive\\\\Documents\\\\GitHub\\\\eleusia\\\\client\\\\src\\\\components\\\\GameBoard.tsx\",\n  _s = $RefreshSig$();\nimport Button from '@mui/material/Button';\nimport Image from 'mui-image';\nimport React, { useState } from 'react';\nimport { useEffect } from 'react';\nimport ImagesContainer from './ImagesContainer';\nimport UsersTable from './UsersTable';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction GameBoard(_ref) {\n  _s();\n  let {\n    socket,\n    pseudo,\n    room\n  } = _ref;\n  const [roomData, setRoomData] = useState();\n  const [counter, setCounter] = useState(0);\n  const [timer, setTimer] = useState(0);\n  const [waitOnCreator, setWaitOnCreator] = useState(false);\n  const [currentImage, setCurrentImage] = useState('');\n  const [votingDisabled, setVotingDisabled] = useState(false);\n  const [acceptedImages, setAcceptedImages] = useState([]);\n  const [refusedImages, setRefusedImages] = useState([]);\n  const isRoomCreator = roomData ? pseudo === roomData.creator : false;\n  const message = isRoomCreator ? \"Bienvenue Ô créateur\" : \"Hey t'es un simple joueur\";\n  const handleClickIncreaseCounter = () => {};\n  const handleClickStartGame = () => {};\n  const handleVote = decision => {\n    socket.emit('vote', room, pseudo, decision);\n    setVotingDisabled(true);\n    if (decision === \"Accept\") {\n      setAcceptedImages([...acceptedImages, currentImage]);\n    } else {\n      setRefusedImages([...refusedImages, currentImage]);\n    }\n    setCurrentImage('');\n  };\n  const handleClickRefuse = () => handleVote('Refuse');\n  const handleClickAccept = () => handleVote('Accept');\n  useEffect(() => {\n    socket.on('counter', counter => {\n      setCounter(counter);\n    });\n    socket.on('updateData', data => {\n      setRoomData(data);\n    });\n    socket.on('timer', timer => {\n      if (!waitOnCreator) {\n        setTimer(timer);\n      } else {\n        setTimer(\"LE MAÎTRE DU JEU DOIT JOUER\");\n      }\n    });\n    socket.on('newRound', image => {\n      setCurrentImage(image);\n      setVotingDisabled(false);\n      setWaitOnCreator(false);\n    });\n    socket.on('waitCreator', () => {\n      setWaitOnCreator(true);\n    });\n  }, [socket, waitOnCreator]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: [\"Room \", room]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Counter: \", counter]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Score: \", roomData ? roomData.users[pseudo].score : 0]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      variant: \"contained\",\n      onClick: handleClickIncreaseCounter,\n      children: \"Increase counter\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Timer: \", timer]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 9\n    }, this), isRoomCreator ? /*#__PURE__*/_jsxDEV(Button, {\n      variant: \"contained\",\n      onClick: handleClickStartGame,\n      children: \"Start game\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 13\n    }, this) : null, roomData ? /*#__PURE__*/_jsxDEV(UsersTable, {\n      users: roomData.users\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 21\n    }, this) : null, currentImage ? /*#__PURE__*/_jsxDEV(Image, {\n      src: currentImage,\n      width: 500\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 25\n    }, this) : null, /*#__PURE__*/_jsxDEV(Button, {\n      variant: \"contained\",\n      onClick: handleClickRefuse,\n      disabled: votingDisabled,\n      children: \"Refuser\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      variant: \"contained\",\n      onClick: handleClickAccept,\n      disabled: votingDisabled,\n      children: \"Accepter\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(ImagesContainer, {\n      images: acceptedImages,\n      category: \"Accepté\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(ImagesContainer, {\n      images: refusedImages,\n      category: \"Accepté\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n}\n_s(GameBoard, \"8CkY8VXBHA+VC0jMzzf/wUydcFg=\");\n_c = GameBoard;\nexport default GameBoard;\nvar _c;\n$RefreshReg$(_c, \"GameBoard\");","map":{"version":3,"names":["Button","Image","React","useState","useEffect","ImagesContainer","UsersTable","jsxDEV","_jsxDEV","Fragment","_Fragment","GameBoard","_ref","_s","socket","pseudo","room","roomData","setRoomData","counter","setCounter","timer","setTimer","waitOnCreator","setWaitOnCreator","currentImage","setCurrentImage","votingDisabled","setVotingDisabled","acceptedImages","setAcceptedImages","refusedImages","setRefusedImages","isRoomCreator","creator","message","handleClickIncreaseCounter","handleClickStartGame","handleVote","decision","emit","handleClickRefuse","handleClickAccept","on","data","image","children","fileName","_jsxFileName","lineNumber","columnNumber","users","score","variant","onClick","src","width","disabled","images","category","_c","$RefreshReg$"],"sources":["C:/Users/vince/OneDrive/Documents/GitHub/eleusia/client/src/components/GameBoard.tsx"],"sourcesContent":["import Button from '@mui/material/Button';\r\nimport Image from 'mui-image'\r\nimport React, { useState } from 'react';\r\nimport { useEffect } from 'react';\r\nimport { Socket } from 'socket.io-client';\r\nimport { RoomData } from '../../../server/server';\r\nimport ImagesContainer from './ImagesContainer';\r\nimport UsersTable from './UsersTable';\r\n\r\nfunction GameBoard({socket, pseudo, room}: {socket: Socket, pseudo: string, room: string}) {\r\n\r\n    const [roomData, setRoomData] = useState<RoomData>()\r\n    const [counter, setCounter] = useState<number>(0)\r\n    const [timer, setTimer] = useState<number | string>(0)\r\n    const [waitOnCreator, setWaitOnCreator] = useState(false)\r\n    const [currentImage, setCurrentImage] = useState('')\r\n    const [votingDisabled, setVotingDisabled] = useState(false)\r\n    const [acceptedImages, setAcceptedImages] = useState<string[]>([])\r\n    const [refusedImages, setRefusedImages] = useState<string[]>([])\r\n\r\n    const isRoomCreator = roomData ? pseudo === roomData.creator : false\r\n    const message = isRoomCreator ? \"Bienvenue Ô créateur\" : \"Hey t'es un simple joueur\"\r\n\r\n    const handleClickIncreaseCounter = () => {\r\n\r\n    }\r\n\r\n    const handleClickStartGame = () => {\r\n\r\n    }\r\n\r\n    const handleVote = (decision: string) => {\r\n        socket.emit('vote', room, pseudo, decision);\r\n        \r\n        setVotingDisabled(true)\r\n\r\n        if (decision === \"Accept\") {\r\n            setAcceptedImages([...acceptedImages, currentImage])\r\n        } else {\r\n            setRefusedImages([...refusedImages, currentImage])\r\n        }\r\n\r\n        setCurrentImage('')\r\n    }\r\n\r\n    const handleClickRefuse = () => handleVote('Refuse')\r\n    const handleClickAccept = () => handleVote('Accept')\r\n\r\n    useEffect(()=>{\r\n        socket.on('counter', (counter: number) => {\r\n            setCounter(counter)\r\n        });\r\n\r\n        socket.on('updateData', (data: RoomData) => {\r\n            setRoomData(data)\r\n        });\r\n    \r\n        socket.on('timer', (timer: number) => {\r\n            if (!waitOnCreator) {\r\n                setTimer(timer)\r\n            } else {\r\n                setTimer(\"LE MAÎTRE DU JEU DOIT JOUER\")\r\n            }\r\n        });\r\n    \r\n        socket.on('newRound', (image: string) => {\r\n            setCurrentImage(image)\r\n\r\n            setVotingDisabled(false)\r\n\r\n            setWaitOnCreator(false)\r\n        });\r\n\r\n        socket.on('waitCreator', () => {\r\n            setWaitOnCreator(true)\r\n        });\r\n    },[socket, waitOnCreator])\r\n\r\n    return (\r\n        <>\r\n        <h1>Room {room}</h1>\r\n        <p>Counter: {counter}</p>\r\n        <p>Score: {roomData ? roomData.users[pseudo].score : 0}</p> \r\n        <Button variant=\"contained\" onClick={handleClickIncreaseCounter}>Increase counter</Button>\r\n        <p>{message}</p>\r\n\r\n        <p>Timer: {timer}</p>\r\n\r\n        {isRoomCreator ?\r\n            <Button variant=\"contained\" onClick={handleClickStartGame}>Start game</Button>\r\n            : null\r\n        }\r\n\r\n        {roomData ? <UsersTable users={roomData.users} /> : null}\r\n        \r\n        {currentImage ? <Image src={currentImage} width={500} /> : null}\r\n\r\n        <Button variant=\"contained\" onClick={handleClickRefuse} disabled={votingDisabled}>Refuser</Button>\r\n        <Button variant=\"contained\" onClick={handleClickAccept} disabled={votingDisabled}>Accepter</Button>\r\n\r\n        \r\n        <ImagesContainer images={acceptedImages} category={\"Accepté\"}/>\r\n\r\n        <ImagesContainer images={refusedImages} category={\"Accepté\"}/>\r\n\r\n        </>\r\n    )\r\n}\r\n\r\nexport default GameBoard;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}