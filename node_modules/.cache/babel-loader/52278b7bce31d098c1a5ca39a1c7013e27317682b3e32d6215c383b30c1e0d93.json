{"ast":null,"code":"import _classCallCheck from \"C:/Users/vince/OneDrive/Documents/GitHub/eleusia/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"C:/Users/vince/OneDrive/Documents/GitHub/eleusia/node_modules/@babel/runtime/helpers/esm/createClass.js\";\n/**\n * Contains global resources of a model.\n */\nexport var ResourceManager = /*#__PURE__*/function () {\n  function ResourceManager() {\n    var hashTableNameToHandle = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var hashTableMap = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    _classCallCheck(this, ResourceManager);\n    this.hashTableNameToHandle = hashTableNameToHandle;\n    this.hashTableMap = hashTableMap;\n  }\n  /**\n   * Register a `HashTable` in the resource manager.\n   *\n   * The `HashTable` can be retrieved by `resourceManager.getHashTableById`,\n   * where id is the table handle tensor's id.\n   *\n   * @param name Op node name that creates the `HashTable`.\n   * @param hashTable The `HashTable` to be added to resource manager.\n   */\n  _createClass(ResourceManager, [{\n    key: \"addHashTable\",\n    value: function addHashTable(name, hashTable) {\n      this.hashTableNameToHandle[name] = hashTable.handle;\n      this.hashTableMap[hashTable.id] = hashTable;\n    }\n    /**\n     * Get the table handle by node name.\n     * @param name Op node name that creates the `HashTable`. This name is also\n     *     used in the inputs list of lookup and import `HashTable` ops.\n     */\n  }, {\n    key: \"getHashTableHandleByName\",\n    value: function getHashTableHandleByName(name) {\n      return this.hashTableNameToHandle[name];\n    }\n    /**\n     * Get the actual `HashTable` by its handle tensor's id.\n     * @param id The id of the handle tensor.\n     */\n  }, {\n    key: \"getHashTableById\",\n    value: function getHashTableById(id) {\n      return this.hashTableMap[id];\n    }\n    /**\n     * Dispose `ResourceManager`, including its hashTables and tensors in them.\n     */\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      for (var key in this.hashTableMap) {\n        this.hashTableMap[key].clearAndClose();\n        delete this.hashTableMap[key];\n      }\n      for (var name in this.hashTableNameToHandle) {\n        this.hashTableNameToHandle[name].dispose();\n        delete this.hashTableNameToHandle[name];\n      }\n    }\n  }]);\n  return ResourceManager;\n}();","map":{"version":3,"names":["ResourceManager","hashTableNameToHandle","arguments","length","undefined","hashTableMap","_classCallCheck","_createClass","key","value","addHashTable","name","hashTable","handle","id","getHashTableHandleByName","getHashTableById","dispose","clearAndClose"],"sources":["C:\\Users\\vince\\OneDrive\\Documents\\GitHub\\tfjs-converter\\src\\executor\\resource_manager.ts"],"sourcesContent":["/**\n * @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport {HashTableMap, NamedTensorMap} from '../data/types';\nimport {HashTable} from './hash_table';\n\n/**\n * Contains global resources of a model.\n */\nexport class ResourceManager {\n  constructor(\n      readonly hashTableNameToHandle: NamedTensorMap = {},\n      readonly hashTableMap: HashTableMap = {}) {}\n\n  /**\n   * Register a `HashTable` in the resource manager.\n   *\n   * The `HashTable` can be retrieved by `resourceManager.getHashTableById`,\n   * where id is the table handle tensor's id.\n   *\n   * @param name Op node name that creates the `HashTable`.\n   * @param hashTable The `HashTable` to be added to resource manager.\n   */\n  addHashTable(name: string, hashTable: HashTable) {\n    this.hashTableNameToHandle[name] = hashTable.handle;\n    this.hashTableMap[hashTable.id] = hashTable;\n  }\n\n  /**\n   * Get the table handle by node name.\n   * @param name Op node name that creates the `HashTable`. This name is also\n   *     used in the inputs list of lookup and import `HashTable` ops.\n   */\n  getHashTableHandleByName(name: string) {\n    return this.hashTableNameToHandle[name];\n  }\n\n  /**\n   * Get the actual `HashTable` by its handle tensor's id.\n   * @param id The id of the handle tensor.\n   */\n  getHashTableById(id: number): HashTable {\n    return this.hashTableMap[id];\n  }\n\n  /**\n   * Dispose `ResourceManager`, including its hashTables and tensors in them.\n   */\n  dispose() {\n    for (const key in this.hashTableMap) {\n      this.hashTableMap[key].clearAndClose();\n      delete this.hashTableMap[key];\n    }\n\n    for (const name in this.hashTableNameToHandle) {\n      this.hashTableNameToHandle[name].dispose();\n      delete this.hashTableNameToHandle[name];\n    }\n  }\n}\n"],"mappings":";;AAmBA;;;AAGA,WAAaA,eAAe;EAC1B,SAAAA,gBAAA,EAE4C;IAAA,IAD/BC,qBAAA,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAwC,EAAE;IAAA,IAC1CG,YAAA,GAAAH,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAA6B,EAAE;IAAAI,eAAA,OAAAN,eAAA;IAD/B,KAAAC,qBAAqB,GAArBA,qBAAqB;IACrB,KAAAI,YAAY,GAAZA,YAAY;EAAsB;EAE/C;;;;;;;;;EAAAE,YAAA,CAAAP,eAAA;IAAAQ,GAAA;IAAAC,KAAA,EASA,SAAAC,aAAaC,IAAY,EAAEC,SAAoB;MAC7C,IAAI,CAACX,qBAAqB,CAACU,IAAI,CAAC,GAAGC,SAAS,CAACC,MAAM;MACnD,IAAI,CAACR,YAAY,CAACO,SAAS,CAACE,EAAE,CAAC,GAAGF,SAAS;IAC7C;IAEA;;;;;EAAA;IAAAJ,GAAA;IAAAC,KAAA,EAKA,SAAAM,yBAAyBJ,IAAY;MACnC,OAAO,IAAI,CAACV,qBAAqB,CAACU,IAAI,CAAC;IACzC;IAEA;;;;EAAA;IAAAH,GAAA;IAAAC,KAAA,EAIA,SAAAO,iBAAiBF,EAAU;MACzB,OAAO,IAAI,CAACT,YAAY,CAACS,EAAE,CAAC;IAC9B;IAEA;;;EAAA;IAAAN,GAAA;IAAAC,KAAA,EAGA,SAAAQ,QAAA,EAAO;MACL,KAAK,IAAMT,GAAG,IAAI,IAAI,CAACH,YAAY,EAAE;QACnC,IAAI,CAACA,YAAY,CAACG,GAAG,CAAC,CAACU,aAAa,EAAE;QACtC,OAAO,IAAI,CAACb,YAAY,CAACG,GAAG,CAAC;;MAG/B,KAAK,IAAMG,IAAI,IAAI,IAAI,CAACV,qBAAqB,EAAE;QAC7C,IAAI,CAACA,qBAAqB,CAACU,IAAI,CAAC,CAACM,OAAO,EAAE;QAC1C,OAAO,IAAI,CAAChB,qBAAqB,CAACU,IAAI,CAAC;;IAE3C;EAAC;EAAA,OAAAX,eAAA;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}