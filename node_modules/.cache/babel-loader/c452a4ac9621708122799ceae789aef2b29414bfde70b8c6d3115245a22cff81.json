{"ast":null,"code":"import React,{useEffect,useState}from'react';import{io}from\"socket.io-client\";import GameBoard from'./components/GameBoard';import Home from'./components/Home';import{Alert,Box,Snackbar}from'@mui/material';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const socket=io();function App(){useEffect(()=>{socket.on('connect',()=>{console.log(socket.id);setConnectionError(false);});socket.on('connect_error',()=>{setTimeout(()=>{socket.connect();},5000);setConnectionError(true);});socket.on('updateRoomData',roomData=>{setRoomData(roomData);});},[]);const[isInGame,setIsInGame]=useState(false);const[pseudo,setPseudo]=useState('');const[room,setRoom]=useState('');const[roomData,setRoomData]=useState(null);const[connectionError,setConnectionError]=useState(false);const callbackPseudoChange=e=>{setPseudo(e.target.value);};const callbackRoomChange=e=>{setRoom(e.target.value);};const callbackJoinRoom=room=>{setRoom(room);setIsInGame(true);};const callbackLeaveRoom=()=>{setRoom('');setIsInGame(false);};return/*#__PURE__*/_jsxs(Box,{padding:2,children:[isInGame&&roomData?/*#__PURE__*/_jsx(GameBoard,{socket:socket,pseudo:pseudo,room:room,roomData:roomData,callbackLeaveRoom:callbackLeaveRoom}):/*#__PURE__*/_jsx(Home,{socket:socket,callbackPseudoChange:callbackPseudoChange,callbackRoomChange:callbackRoomChange,callbackJoinRoom:callbackJoinRoom}),/*#__PURE__*/_jsx(Snackbar,{open:connectionError,autoHideDuration:6000,onClose:()=>setConnectionError(false),children:/*#__PURE__*/_jsx(Alert,{onClose:()=>setConnectionError(false),severity:\"error\",sx:{width:'100%'},children:\"Impossible de se connecter au serveur. Veuillez v\\xE9rifier votre connexion ou r\\xE9essayer plus tard.\"})})]});}export default App;","map":{"version":3,"names":["React","useEffect","useState","io","GameBoard","Home","Alert","Box","Snackbar","jsx","_jsx","jsxs","_jsxs","socket","App","on","console","log","id","setConnectionError","setTimeout","connect","roomData","setRoomData","isInGame","setIsInGame","pseudo","setPseudo","room","setRoom","connectionError","callbackPseudoChange","e","target","value","callbackRoomChange","callbackJoinRoom","callbackLeaveRoom","padding","children","open","autoHideDuration","onClose","severity","sx","width"],"sources":["C:/Users/vince/OneDrive/Documents/GitHub/eleusia/src/App.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport { io, Socket } from \"socket.io-client\";\r\nimport GameBoard from './components/GameBoard';\r\nimport Home from './components/Home'\r\nimport { RoomData } from '../server';\r\nimport { Alert, Box, Snackbar } from '@mui/material';\r\n\r\nconst socket: Socket = io()\r\n\r\nfunction App() {\r\n  useEffect(()=>{\r\n    socket.on('connect', () => {\r\n      console.log(socket.id)\r\n      setConnectionError(false)\r\n    });\r\n\r\n    socket.on('connect_error', () => {\r\n      setTimeout(() => {\r\n          socket.connect();\r\n      }, 5000);\r\n      setConnectionError(true)\r\n    });\r\n\r\n    socket.on('updateRoomData', (roomData: RoomData) => {\r\n      setRoomData(roomData)\r\n    })\r\n  },[])\r\n\r\n  const [isInGame, setIsInGame] = useState(false)\r\n  const [pseudo, setPseudo] = useState('')\r\n  const [room, setRoom] = useState('')\r\n  const [roomData, setRoomData] = useState<RoomData | null>(null)\r\n  const [connectionError, setConnectionError] = useState(false)\r\n\r\n  const callbackPseudoChange = (e: React.ChangeEvent<HTMLInputElement>) => {setPseudo(e.target.value)}\r\n  const callbackRoomChange = (e: React.ChangeEvent<HTMLInputElement>) => {setRoom(e.target.value)}\r\n  const callbackJoinRoom = (room: string) => {\r\n    setRoom(room)\r\n    setIsInGame(true)\r\n  }\r\n  const callbackLeaveRoom = () => {\r\n    setRoom('')\r\n    setIsInGame(false)\r\n  }\r\n\r\n  return (\r\n    <Box padding={2}>\r\n      {isInGame && roomData\r\n        ? <GameBoard socket={socket} pseudo={pseudo} room={room} roomData={roomData} callbackLeaveRoom={callbackLeaveRoom} />\r\n        : <Home socket={socket} callbackPseudoChange={callbackPseudoChange} callbackRoomChange={callbackRoomChange} callbackJoinRoom={callbackJoinRoom} />\r\n      }\r\n      <Snackbar open={connectionError} autoHideDuration={6000} onClose={() => setConnectionError(false)}>\r\n          <Alert onClose={() => setConnectionError(false)} severity=\"error\" sx={{ width: '100%' }}>\r\n              Impossible de se connecter au serveur. Veuillez vérifier votre connexion ou réessayer plus tard.\r\n          </Alert>\r\n      </Snackbar>\r\n    </Box>\r\n  )\r\n}\r\n\r\nexport default App"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}